!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o(require("react")):"function"==typeof define&&define.amd?define(["react"],o):(e||self).useEyeDropper=o(e.react)}(this,function(e){const o=()=>"undefined"!=typeof window&&"EyeDropper"in window,r=()=>{let e="Unsupported browser.";return e="Unsupported browser: no EyeDropper in Window. Check https://developer.mozilla.org/en-US/docs/Web/API/EyeDropper_API.",Promise.reject(new Error("Unsupported browser: no EyeDropper in Window. Check https://developer.mozilla.org/en-US/docs/Web/API/EyeDropper_API."))},n=()=>{const r=e.useRef(),[n,t]=e.useState(!1);e.useEffect(()=>(r.current=!0,t(o()),()=>{r.current=!1}),[]);const i=e.useCallback(()=>n,[n]);return[r,i]},t=e=>{const n=(e=>o()&&new EyeDropper(e))(e);var t;return(t=n)?EyeDropper.prototype.open.bind(t):r};return o=>{const r=e.useMemo(()=>t(o),[o]),[i,p]=n(),s=e.useRef(),c=e.useCallback(()=>{void 0!==s.current&&s.current.abort()},[s]),d=e.useCallback(function(e){void 0===e&&(e={});try{c();const{signal:o,...n}=e,t=new AbortController;s.current=t;const p=void 0!==o?(e=>{const o=new AbortController,r=()=>{o.abort();for(const o of e)o.removeEventListener("abort",r)};for(const o of e){if(o.aborted){r();break}o.addEventListener("abort",r)}return o.signal})([o,t.signal]):t.signal;return Promise.resolve(function(e,o){try{var t=Promise.resolve(r({...n,signal:p}))}catch(e){return o(e)}return t&&t.then?t.then(void 0,o):t}(0,function(e){throw i.current||(e.canceled=!0),e}))}catch(e){return Promise.reject(e)}},[s,i,c,r]);return e.useEffect(()=>c,[c]),{open:d,close:c,isSupported:p}}});
