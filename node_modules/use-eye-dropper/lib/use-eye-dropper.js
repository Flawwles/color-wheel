!function(o,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):(o||self).useEyeDropper=e(o.react)}(this,function(o){const e=()=>"undefined"!=typeof window&&"EyeDropper"in window,r=()=>Promise.reject(new Error("Unsupported browser.")),n=()=>{const r=o.useRef(),[n,t]=o.useState(!1);o.useEffect(()=>(r.current=!0,t(e()),()=>{r.current=!1}),[]);const i=o.useCallback(()=>n,[n]);return[r,i]},t=o=>{const n=(o=>e()&&new EyeDropper(o))(o);var t;return(t=n)?EyeDropper.prototype.open.bind(t):r};return e=>{const r=o.useMemo(()=>t(e),[e]),[i,s]=n(),c=o.useRef(),f=o.useCallback(()=>{void 0!==c.current&&c.current.abort()},[c]),u=o.useCallback(function(o){void 0===o&&(o={});try{f();const{signal:e,...n}=o,t=new AbortController;c.current=t;const s=void 0!==e?(o=>{const e=new AbortController,r=()=>{e.abort();for(const e of o)e.removeEventListener("abort",r)};for(const e of o){if(e.aborted){r();break}e.addEventListener("abort",r)}return e.signal})([e,t.signal]):t.signal;return Promise.resolve(function(o,e){try{var t=Promise.resolve(r({...n,signal:s}))}catch(o){return e(o)}return t&&t.then?t.then(void 0,e):t}(0,function(o){throw i.current||(o.canceled=!0),o}))}catch(o){return Promise.reject(o)}},[c,i,f,r]);return o.useEffect(()=>f,[f]),{open:u,close:f,isSupported:s}}});
